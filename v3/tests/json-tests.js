import {MathJax} from 'mathjax/mathjax.js';
export {MathJax} from 'mathjax/mathjax.js';

import 'mathjax/handlers/html.js';
import {LegacyTeX} from 'mathjax/input/legacy/TeX.js';

import {Test} from './tests.js';


class JsonTest extends Test {

  constructor() {
    super();
  }

  // Tests exclusively the timing of the Translate method.
  runTest(name, tex, expected) {
    let html = MathJax.HandlerFor('<html></html>');
    MathJax.HandleRetriesFor(function() {
      html.TestMath(tex).Compile();
      this.test(
          name,
          t => {
            t.deepEqual(
                LegacyTeX.Translate(html.math[0].math, html.math[0].display),
                expected, name);
          });
    }.bind(this)).
      catch(err => { console.log(err.message); });
  }

  ignoreTest(name, tex, expected) {
  }
  amsTest(name, tex, expected) {
  }
  
}

let jsonTest = new JsonTest();

jsonTest.runTest(
  'Identifier', 'x',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
        {'type':'mi',
         'text':'x',
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}
  }
);


jsonTest.runTest(
  'Two Identifiers', 'xy',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
        {'type':'mi',
         'text':'x',
         'attributes':{}},
        {'type':'mi',
         'text':'y',
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}
  }
);


jsonTest.runTest(
  'Number', '2',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
        {'type':'mn',
         'text':'2',
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}
  }
);


jsonTest.runTest(
  'Square', 'x^2',
  {'type':'math',
   'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'msup',
               'children':[
                 {'type':'mi',
                  'text':'x',
                  'attributes':{}},
                 {'type':'mn',
                  'text':'2',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}
        }
       );


jsonTest.runTest(
  'Cube', 'x^3',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'msup',
               'children':[
                 {'type':'mi',
                  'text':'x',
                  'attributes':{}},
                 {'type':'mn',
                  'text':'3',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}
        }
       );


jsonTest.runTest(
  'Index', 'x_3',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'msub',
               'children':[
                 {'type':'mi',
                  'text':'x',
                  'attributes':{}},
                 {'type':'mn',
                  'text':'3',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}
        }
       );


jsonTest.runTest(
  'SubSup', 'x^a_3',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'msubsup',
               'children':[
                 {'type':'mi',
                  'text':'x',
                  'attributes':{}},
                 {'type':'mn',
                  'text':'3',
                  'attributes':{}},
                 {'type':'mi',
                  'text':'a',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}
        }
       );


jsonTest.runTest(
  'Prime', 'x\'',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
        {'type':'msub',
         'children':[
           {'type':'mi',
            'text':'x',
            'attributes':{}},
           {'type':'mo',
            'text':'′',
            'attributes':{}}],
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}}
);

jsonTest.runTest(
  'Double Prime', 'x\'\'',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
        {'type':'msub',
         'children':[
           {'type':'mi',
            'text':'x',
            'attributes':{}},
           {'type':'mo',
            'text':'″',
            'attributes':{}}],
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}}
);


jsonTest.runTest(
  'PrePrime', '\'x',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
        {'type':'msub',
         'children':[
           {'type':'mi',
            'text':'x',
            'attributes':{}},
           {'type':'mo',
            'text':'″',
            'attributes':{}}],
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}}
);


jsonTest.ignoreTest(
  'Square Root Expression', '\\sqrt{3x-1}+(1+x)^2',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
	{'type':'msqrt',
         'children':[
	   {'type':'mrow',
            'inferred':true,
            'children':[
	      {'type':'mn',
               'text':'3',
               'attributes':{}},
	      {'type':'mi',
               'text':'x',
               'attributes':{}},
	      {'type':'mo',
               'text':'−',
               'attributes':{}},
	      {'type':'mn',
               'text':'1',
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{}},
	{'type':'mo',
         'text':'+',
         'attributes':{}},
	{'type':'mo',
         'text':'(',
         'attributes':{'stretchy':false}},
	{'type':'mn',
         'text':'1',
         'attributes':{}},
	{'type':'mo',
         'text':'+',
         'attributes':{}},
	{'type':'mi',
         'text':'x',
         'attributes':{}},
	{'type':'msup',
         'children':[
	   {'type':'mo',
            'text':')',
            'attributes':{'stretchy':false}},
	   {'type':'mn',
            'text':'2',
            'attributes':{}}],
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}});


jsonTest.ignoreTest(
  'General Root Expression', '\\sqrt[4]{3x-1}+(1+x)^2',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
	{'type':'mroot',
         'children':[
	   {"type":"mrow",
            "inferred":true,
            "children":[
              {'type':'mn',
               'text':'3',
               'attributes':{}},
	      {'type':'mi',
               'text':'x',
               'attributes':{}},
	      {'type':'mo',
               'text':'−',
               'attributes':{}},
	      {'type':'mn',
               'text':'1',
               'attributes':{}}],
            'attributes':{}},
           {'type':'mn',
            'text':'4',
            'attributes':{}}],
         'attributes':{}},
	{'type':'mo',
         'text':'+',
         'attributes':{}},
	{'type':'mo',
         'text':'(',
         'attributes':{'stretchy':false}},
	{'type':'mn',
         'text':'1',
         'attributes':{}},
	{'type':'mo',
         'text':'+',
         'attributes':{}},
	{'type':'mi',
         'text':'x',
         'attributes':{}},
	{'type':'msup',
         'children':[
	   {'type':'mo',
            'text':')',
            'attributes':{'stretchy':false}},
	   {'type':'mn',
            'text':'2',
            'attributes':{}}],
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}});


jsonTest.ignoreTest('Quadratic Formula',
        'x = \\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mi',
               'text':'x',
               'attributes':{}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'b',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'±',
                     'attributes':{}},
                    {'type':'msqrt',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'msup',
                           'children':[
                             {'type':'mi',
                              'text':'b',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'2',
                              'attributes':{}}],
                           'attributes':{}},
                          {'type':'mo',
                           'text':'−',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'4',
                           'attributes':{}},
                          {'type':'mi',
                           'text':'a',
                           'attributes':{}},
                          {'type':'mi',
                           'text':'c',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mn',
                     'text':'2',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'a',
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );


jsonTest.ignoreTest('Cauchy-Schwarz Inequality',
        '\\left( \\sum_{k=1}^n a_k b_k \\right)^{\\!\\!2} \\leq' +
        '  \\left( \\sum_{k=1}^n a_k^2 \\right)' +
        '  \\left( \\sum_{k=1}^n b_k^2 \\right)',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'msup',
               'children':[
                 {'type':'mrow',
                  'children':[
                    {'type':'mo',
                     'text':'(',
                     'attributes':{}},
                    {'type':'munderover',
                     'children':[
                       {'type':'mo',
                        'text':'∑',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mi',
                              'text':'k',
                              'attributes':{}},
                             {'type':'mo',
                              'text':'=',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'1',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mi',
                        'text':'n',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'msub',
                     'children':[
                       {'type':'mi',
                        'text':'a',
                        'attributes':{}},
                       {'type':'mi',
                        'text':'k',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'msub',
                     'children':[
                       {'type':'mi',
                        'text':'b',
                        'attributes':{}},
                       {'type':'mi',
                        'text':'k',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mspace',
                        'text':'',
                        'attributes':{'width':'negativethinmathspace'}},
                       {'type':'mspace',
                        'text':'',
                        'attributes':{'width':'negativethinmathspace'}},
                       {'type':'mn',
                        'text':'2',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'}],
               'attributes':{}},
              {'type':'mo',
               'text':'≤',
               'attributes':{}},
              {'type':'mrow',
               'children':[
                 {'type':'mo',
                  'text':'(',
                  'attributes':{}},
                 {'type':'munderover',
                  'children':[
                    {'type':'mo',
                     'text':'∑',
                     'attributes':{}},
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mi',
                           'text':'k',
                           'attributes':{}},
                          {'type':'mo',
                           'text':'=',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'1',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'},
                    {'type':'mi',
                     'text':'n',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'msubsup',
                  'children':[
                    {'type':'mi',
                     'text':'a',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'k',
                     'attributes':{}},
                    {'type':'mn',
                     'text':'2',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mo',
                  'text':')',
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mrow',
               'children':[
                 {'type':'mo',
                  'text':'(',
                  'attributes':{}},
                 {'type':'munderover',
                  'children':[
                    {'type':'mo',
                     'text':'∑',
                     'attributes':{}},
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mi',
                           'text':'k',
                           'attributes':{}},
                          {'type':'mo',
                           'text':'=',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'1',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'},
                    {'type':'mi',
                     'text':'n',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'msubsup',
                  'children':[
                    {'type':'mi',
                     'text':'b',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'k',
                     'attributes':{}},
                    {'type':'mn',
                     'text':'2',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mo',
                  'text':')',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );



jsonTest.ignoreTest('An Identity of Ramanujan',
        '\\frac{1}{\\Bigl(\\sqrt{\\phi\\sqrt{5}}-\\phi\\Bigr)' +
        '  e^{\\frac25\\pi}} =' +
        '    1+\\frac{e^{-2\\pi}}' +
        '      {1+\\frac{e^{-4\\pi}}' +
        '        {1+\\frac{e^{-6\\pi}}' +
        '          {1+\\frac{e^{-8\\pi}}' +
        '            {1+\\ldots} } } }',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mfrac',
               'children':[
                 {'type':'mn',
                  'text':'1',
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mo',
                           'text':'(',
                           'attributes':{'maxsize':'1.623em',
                                         'minsize':'1.623em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'OPEN'},
                    {'type':'msqrt',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mi',
                           'text':'ϕ',
                           'attributes':{}},
                          {'type':'msqrt',
                           'children':[
                             {'type':'mrow',
                              'inferred':true,
                              'children':[
                                {'type':'mn',
                                 'text':'5',
                                 'attributes':{}}],
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'ϕ',
                     'attributes':{}},
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mo',
                           'text':')',
                           'attributes':{'maxsize':'1.623em',
                                         'minsize':'1.623em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'CLOSE'},
                    {'type':'msup',
                     'children':[
                       {'type':'mi',
                        'text':'e',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mfrac',
                              'children':[
                                {'type':'mn',
                                 'text':'2',
                                 'attributes':{}},
                                {'type':'mn',
                                 'text':'5',
                                 'attributes':{}}],
                              'attributes':{}},
                             {'type':'mi',
                              'text':'π',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'mn',
               'text':'1',
               'attributes':{}},
              {'type':'mo',
               'text':'+',
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'msup',
                  'children':[
                    {'type':'mi',
                     'text':'e',
                     'attributes':{}},
                    {'type':'mrow',
                     'children':[
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mo',
                           'text':'−',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'2',
                           'attributes':{}},
                          {'type':'mi',
                           'text':'π',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'+',
                     'attributes':{}},
                    {'type':'mfrac',
                     'children':[
                       {'type':'msup',
                        'children':[
                          {'type':'mi',
                           'text':'e',
                           'attributes':{}},
                          {'type':'mrow',
                           'children':[
                             {'type':'mrow',
                              'inferred':true,
                              'children':[
                                {'type':'mo',
                                 'text':'−',
                                 'attributes':{}},
                                {'type':'mn',
                                 'text':'4',
                                 'attributes':{}},
                                {'type':'mi',
                                 'text':'π',
                                 'attributes':{}}],
                              'attributes':{}}],
                           'attributes':{},
                           'TeXAtom':'ORD'}],
                        'attributes':{}},
                       {'type':'mrow',
                        'inferred':true,
                        'children':[
                          {'type':'mn',
                           'text':'1',
                           'attributes':{}},
                          {'type':'mo',
                           'text':'+',
                           'attributes':{}},
                          {'type':'mfrac',
                           'children':[
                             {'type':'msup',
                              'children':[
                                {'type':'mi',
                                 'text':'e',
                                 'attributes':{}},
                                {'type':'mrow',
                                 'children':[
                                   {'type':'mrow',
                                    'inferred':true,
                                    'children':[
                                      {'type':'mo',
                                       'text':'−',
                                       'attributes':{}},
                                      {'type':'mn',
                                       'text':'6',
                                       'attributes':{}},
                                      {'type':'mi',
                                       'text':'π',
                                       'attributes':{}}],
                                    'attributes':{}}],
                                 'attributes':{},
                                 'TeXAtom':'ORD'}],
                              'attributes':{}},
                             {'type':'mrow',
                              'inferred':true,
                              'children':[
                                {'type':'mn',
                                 'text':'1',
                                 'attributes':{}},
                                {'type':'mo',
                                 'text':'+',
                                 'attributes':{}},
                                {'type':'mfrac',
                                 'children':[
                                   {'type':'msup',
                                    'children':[
                                      {'type':'mi',
                                       'text':'e',
                                       'attributes':{}},
                                      {'type':'mrow',
                                       'children':[
                                         {'type':'mrow',
                                          'inferred':true,
                                          'children':[
                                            {'type':'mo',
                                             'text':'−',
                                             'attributes':{}},
                                            {'type':'mn',
                                             'text':'8',
                                             'attributes':{}},
                                            {'type':'mi',
                                             'text':'π',
                                             'attributes':{}}],
                                          'attributes':{}}],
                                       'attributes':{},
                                       'TeXAtom':'ORD'}],
                                    'attributes':{}},
                                   {'type':'mrow',
                                    'inferred':true,
                                    'children':[
                                      {'type':'mn',
                                       'text':'1',
                                       'attributes':{}},
                                      {'type':'mo',
                                       'text':'+',
                                       'attributes':{}},
                                      {'type':'mo',
                                       'text':'…',
                                       'attributes':{}}],
                                    'attributes':{}}],
                                 'attributes':{}}],
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );


jsonTest.ignoreTest('A Rogers-Ramanujan Identity',
        '1 + \\frac{q^2}{(1-q)}' +
        '  + \\frac{q^6}{(1-q)(1-q^2)} + \\cdots =' +
        '\\prod_{j=0}^{\\infty}' +
        '  \\frac{1}{(1-q^{5j+2})(1-q^{5j+3})},' +
        '     \\quad\\quad \\text{for $|q|<1$}.',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mn',
               'text':'1',
               'attributes':{}},
              {'type':'mo',
               'text':'+',
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'msup',
                  'children':[
                    {'type':'mi',
                     'text':'q',
                     'attributes':{}},
                    {'type':'mn',
                     'text':'2',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'q',
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mo',
               'text':'+',
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'msup',
                  'children':[
                    {'type':'mi',
                     'text':'q',
                     'attributes':{}},
                    {'type':'mn',
                     'text':'6',
                     'attributes':{}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'q',
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}},
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'msup',
                     'children':[
                       {'type':'mi',
                        'text':'q',
                        'attributes':{}},
                       {'type':'mn',
                        'text':'2',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mo',
               'text':'+',
               'attributes':{}},
              {'type':'mo',
               'text':'⋯',
               'attributes':{}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'munderover',
               'children':[
                 {'type':'mo',
                  'text':'∏',
                  'attributes':{}},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mi',
                        'text':'j',
                        'attributes':{}},
                       {'type':'mo',
                        'text':'=',
                        'attributes':{}},
                       {'type':'mn',
                        'text':'0',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mi',
                        'text':'∞',
                        'attributes':{'mathvariant':'normal'}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'}],
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'mn',
                  'text':'1',
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'msup',
                     'children':[
                       {'type':'mi',
                        'text':'q',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mn',
                              'text':'5',
                              'attributes':{}},
                             {'type':'mi',
                              'text':'j',
                              'attributes':{}},
                             {'type':'mo',
                              'text':'+',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'2',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}},
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mn',
                     'text':'1',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'msup',
                     'children':[
                       {'type':'mi',
                        'text':'q',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mn',
                              'text':'5',
                              'attributes':{}},
                             {'type':'mi',
                              'text':'j',
                              'attributes':{}},
                             {'type':'mo',
                              'text':'+',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'3',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mo',
               'text':',',
               'attributes':{}},
              {'type':'mspace',
               'text':'',
               'attributes':{'width':'1em'}},
              {'type':'mspace',
               'text':'',
               'attributes':{'width':'1em'}},
              {'type':'mrow',
               'children':[
                 {'type':'mtext',
                  'text':'for ',
                  'attributes':{}},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mo',
                              'text':'|',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mi',
                        'text':'q',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mo',
                              'text':'|',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mo',
                        'text':'<',
                        'attributes':{}},
                       {'type':'mn',
                        'text':'1',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'}],
               'attributes':{}},
              {'type':'mo',
               'text':'.',
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );

jsonTest.ignoreTest('A Summation Formula',
        '\\sum_{n=1}^\\infty {1\\over n^2} = {\\pi^2\\over 6}',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'munderover',
               'children':[
                 {'type':'mo',
                  'text':'∑',
                  'attributes':{}},
                 {'type':'mrow',
                  'children':[
                    {'type':'mrow',
                     'inferred':true,
                     'children':[
                       {'type':'mi',
                        'text':'n',
                        'attributes':{}},
                       {'type':'mo',
                        'text':'=',
                        'attributes':{}},
                       {'type':'mn',
                        'text':'1',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{},
                  'TeXAtom':'ORD'},
                 {'type':'mi',
                  'text':'∞',
                  'attributes':{'mathvariant':'normal'}}],
               'attributes':{}},
              {'type':'mrow',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mfrac',
                     'children':[
                       {'type':'mn',
                        'text':'1',
                        'attributes':{}},
                       {'type':'msup',
                        'children':[
                          {'type':'mi',
                           'text':'n',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'2',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{},
               'TeXAtom':'ORD'},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'mrow',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mfrac',
                     'children':[
                       {'type':'msup',
                        'children':[
                          {'type':'mi',
                           'text':'π',
                           'attributes':{}},
                          {'type':'mn',
                           'text':'2',
                           'attributes':{}}],
                        'attributes':{}},
                       {'type':'mn',
                        'text':'6',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{},
               'TeXAtom':'ORD'}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );


jsonTest.ignoreTest('Cauchy\'s Integral Formula',
        'f(a) = \\oint_\\gamma \\frac{f(z)}{z-a}dz',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mi',
               'text':'f',
               'attributes':{}},
              {'type':'mo',
               'text':'(',
               'attributes':{'stretchy':false}},
              {'type':'mi',
               'text':'a',
               'attributes':{}},
              {'type':'mo',
               'text':')',
               'attributes':{'stretchy':false}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'msub',
               'children':[
                 {'type':'mo',
                  'text':'∮',
                  'attributes':{}},
                 {'type':'mi',
                  'text':'γ',
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mfrac',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mi',
                     'text':'f',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
                    {'type':'mi',
                     'text':'z',
                     'attributes':{}},
                    {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}},
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mi',
                     'text':'z',
                     'attributes':{}},
                    {'type':'mo',
                     'text':'−',
                     'attributes':{}},
                    {'type':'mi',
                     'text':'a',
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}},
              {'type':'mi',
               'text':'d',
               'attributes':{}},
              {'type':'mi',
               'text':'z',
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );

jsonTest.ignoreTest('Standard Deviation',
        '\\sigma = \\sqrt{\\frac{1}{N}\\sum_{i=1}^N {(x_i-\\mu)}^2}',
        {'type':'math',
         'children':[
           {'type':'mrow',
            'inferred':true,
            'children':[
              {'type':'mi',
               'text':'σ',
               'attributes':{}},
              {'type':'mo',
               'text':'=',
               'attributes':{}},
              {'type':'msqrt',
               'children':[
                 {'type':'mrow',
                  'inferred':true,
                  'children':[
                    {'type':'mfrac',
                     'children':[
                       {'type':'mn',
                        'text':'1',
                        'attributes':{}},
                       {'type':'mi',
                        'text':'N',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'munderover',
                     'children':[
                       {'type':'mo',
                        'text':'∑',
                        'attributes':{}},
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mi',
                              'text':'i',
                              'attributes':{}},
                             {'type':'mo',
                              'text':'=',
                              'attributes':{}},
                             {'type':'mn',
                              'text':'1',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mi',
                        'text':'N',
                        'attributes':{}}],
                     'attributes':{}},
                    {'type':'msup',
                     'children':[
                       {'type':'mrow',
                        'children':[
                          {'type':'mrow',
                           'inferred':true,
                           'children':[
                             {'type':'mo',
                              'text':'(',
                              'attributes':{'stretchy':false}},
                             {'type':'msub',
                              'children':[
                                {'type':'mi',
                                 'text':'x',
                                 'attributes':{}},
                                {'type':'mi',
                                 'text':'i',
                                 'attributes':{}}],
                              'attributes':{}},
                             {'type':'mo',
                              'text':'−',
                              'attributes':{}},
                             {'type':'mi',
                              'text':'μ',
                              'attributes':{}},
                             {'type':'mo',
                              'text':')',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'},
                       {'type':'mn',
                        'text':'2',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'display':'block'}}
       );


jsonTest.amsTest(
  'The Lorenz Equations', '\\begin{align}' +
    '\\dot{x} & = \\sigma(y-x) \\\\' +
    '\\dot{y} & = \\rho x - y - xz \\\\' +
    '\\dot{z} & = -\\beta z + xy' +
    '\\end{align}',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
	{'type':'mtable',
         'children':[
	   {'type':'mtr',
            'children':[
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mi',
                              'text':'x',
                              'attributes':{}},
	                     {'type':'mo',
                              'text':'˙',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'=',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'σ',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'(',
                     'attributes':{'stretchy':false}},
	            {'type':'mi',
                     'text':'y',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'−',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'x',
                     'attributes':{}},
	            {'type':'mo',
                     'text':')',
                     'attributes':{'stretchy':false}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}},
	   {'type':'mtr',
            'children':[
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mi',
                              'text':'y',
                              'attributes':{}},
	                     {'type':'mo',
                              'text':'˙',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'=',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'ρ',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'x',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'−',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'y',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'−',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'x',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'z',
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}},
	   {'type':'mtr',
            'children':[
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mi',
                              'text':'z',
                              'attributes':{}},
	                     {'type':'mo',
                              'text':'˙',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'=',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'−',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'β',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'z',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'+',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'x',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'y',
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{'columnalign':'right left right left right left right left right left right left',
                       'rowspacing':'3pt',
                       'columnspacing':'0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em',
                       'displaystyle':true}}],
      'attributes':{}}],
   'attributes':{'display':'block'}});


jsonTest.ignoreTest(
  'A Cross Product Formula', '\\mathbf{V}_1 \\times \\mathbf{V}_2 =' +
    '   \\begin{vmatrix}' +
    ' \\mathbf{i} & \\mathbf{j} & \\mathbf{k} \\\\' +
    '    \\frac{\\partial X}{\\partial u} &' +
    ' \\frac{\\partial Y}{\\partial u} & 0 \\\\' +
    '    \\frac{\\partial X}{\\partial v} &' +
    ' \\frac{\\partial Y}{\\partial v} & 0 \\\\' +
    '   \\end{vmatrix}',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
	{'type':'msub',
         'children':[
	   {'type':'mrow',
            'children':[
	      {'type':'mrow',
               'inferred':true,
               'children':[
	         {'type':'mi',
                  'text':'V',
                  'attributes':{'mathvariant':'bold'}}],
               'attributes':{}}],
            'attributes':{},
            'TeXAtom':'ORD'},
	   {'type':'mn',
            'text':'1',
            'attributes':{}}],
         'attributes':{}},
	{'type':'mo',
         'text':'×',
         'attributes':{}},
	{'type':'msub',
         'children':[
	   {'type':'mrow',
            'children':[
	      {'type':'mrow',
               'inferred':true,
               'children':[
	         {'type':'mi',
                  'text':'V',
                  'attributes':{'mathvariant':'bold'}}],
               'attributes':{}}],
            'attributes':{},
            'TeXAtom':'ORD'},
	   {'type':'mn',
            'text':'2',
            'attributes':{}}],
         'attributes':{}},
	{'type':'mo',
         'text':'=',
         'attributes':{}},
	{'type':'mrow',
         'children':[
	   {'type':'mo',
            'text':'|',
            'attributes':{}},
	   {'type':'mtable',
            'children':[
	      {'type':'mtr',
               'children':[
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mrow',
                        'children':[
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'i',
                              'attributes':{'mathvariant':'bold'}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}}],
                  'attributes':{}},
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mrow',
                        'children':[
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'j',
                              'attributes':{'mathvariant':'bold'}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}}],
                  'attributes':{}},
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mrow',
                        'children':[
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'k',
                              'attributes':{'mathvariant':'bold'}}],
                           'attributes':{}}],
                        'attributes':{},
                        'TeXAtom':'ORD'}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtr',
               'children':[
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mfrac',
                        'children':[
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'∂',
                              'attributes':{'mathvariant':'normal'}},
	                     {'type':'mi',
                              'text':'X',
                              'attributes':{}}],
                           'attributes':{}},
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'∂',
                              'attributes':{'mathvariant':'normal'}},
	                     {'type':'mi',
                              'text':'u',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}},
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mfrac',
                        'children':[
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'∂',
                              'attributes':{'mathvariant':'normal'}},
	                     {'type':'mi',
                              'text':'Y',
                              'attributes':{}}],
                           'attributes':{}},
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'∂',
                              'attributes':{'mathvariant':'normal'}},
	                     {'type':'mi',
                              'text':'u',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}},
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mn',
                        'text':'0',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtr',
               'children':[
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mfrac',
                        'children':[
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'∂',
                              'attributes':{'mathvariant':'normal'}},
	                     {'type':'mi',
                              'text':'X',
                              'attributes':{}}],
                           'attributes':{}},
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'∂',
                              'attributes':{'mathvariant':'normal'}},
	                     {'type':'mi',
                              'text':'v',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}},
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mfrac',
                        'children':[
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'∂',
                              'attributes':{'mathvariant':'normal'}},
	                     {'type':'mi',
                              'text':'Y',
                              'attributes':{}}],
                           'attributes':{}},
	                  {'type':'mrow',
                           'inferred':true,
                           'children':[
	                     {'type':'mi',
                              'text':'∂',
                              'attributes':{'mathvariant':'normal'}},
	                     {'type':'mi',
                              'text':'v',
                              'attributes':{}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}},
	         {'type':'mtd',
                  'children':[
	            {'type':'mrow',
                     'inferred':true,
                     'children':[
	               {'type':'mn',
                        'text':'0',
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{'rowspacing':'4pt',
                          'columnspacing':'1em'}},
	   {'type':'mo',
            'text':'|',
            'attributes':{}}],
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}});


jsonTest.amsTest(
  'Probability', 'P(E) = {n \\choose k} p^k (1-p)^{ n-k}',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
	{'type':'mi',
         'text':'P',
         'attributes':{}},
	{'type':'mo',
         'text':'(',
         'attributes':{'stretchy':false}},
	{'type':'mi',
         'text':'E',
         'attributes':{}},
	{'type':'mo',
         'text':')',
         'attributes':{'stretchy':false}},
	{'type':'mo',
         'text':'=',
         'attributes':{}},
	{'type':'mrow',
         'children':[
	   {'type':'mrow',
            'inferred':true,
            'children':[
	      {'type':'mrow',
               'children':[
	         {'type':'TeXmathchoice',
                  'children':[
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mo',
                           'text':'(',
                           'attributes':{'maxsize':'2.047em',
                                         'minsize':'2.047em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'OPEN'},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mo',
                           'text':'(',
                           'attributes':{'maxsize':'1.2em',
                                         'minsize':'1.2em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'OPEN'},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mo',
                           'text':'(',
                           'attributes':{'maxsize':'1.2em',
                                         'minsize':'1.2em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'OPEN'},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mo',
                           'text':'(',
                           'attributes':{'maxsize':'1.2em',
                                         'minsize':'1.2em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'OPEN'}],
                  'attributes':{}},
	         {'type':'mfrac',
                  'children':[
	            {'type':'mi',
                     'text':'n',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'k',
                     'attributes':{}}],
                  'attributes':{'linethickness':0}},
	         {'type':'TeXmathchoice',
                  'children':[
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mo',
                           'text':')',
                           'attributes':{'maxsize':'2.047em',
                                         'minsize':'2.047em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'CLOSE'},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mo',
                           'text':')',
                           'attributes':{'maxsize':'1.2em',
                                         'minsize':'1.2em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'CLOSE'},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mo',
                           'text':')',
                           'attributes':{'maxsize':'1.2em',
                                         'minsize':'1.2em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'CLOSE'},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mo',
                           'text':')',
                           'attributes':{'maxsize':'1.2em',
                                         'minsize':'1.2em'}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'CLOSE'}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{},
         'TeXAtom':'ORD'},
	{'type':'msup',
         'children':[
	   {'type':'mi',
            'text':'p',
            'attributes':{}},
	   {'type':'mi',
            'text':'k',
            'attributes':{}}],
         'attributes':{}},
	{'type':'mo',
         'text':'(',
         'attributes':{'stretchy':false}},
	{'type':'mn',
         'text':'1',
         'attributes':{}},
	{'type':'mo',
         'text':'−',
         'attributes':{}},
	{'type':'mi',
         'text':'p',
         'attributes':{}},
	{'type':'msup',
         'children':[
	   {'type':'mo',
            'text':')',
            'attributes':{'stretchy':false}},
	   {'type':'mrow',
            'children':[
	      {'type':'mrow',
               'inferred':true,
               'children':[
	         {'type':'mi',
                  'text':'n',
                  'attributes':{}},
	         {'type':'mo',
                  'text':'−',
                  'attributes':{}},
	         {'type':'mi',
                  'text':'k',
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{},
            'TeXAtom':'ORD'}],
         'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}});


jsonTest.amsTest(
  'Maxwell\'s Equations', '\\begin{align} ' +
    '\\nabla \\times \\vec{\\mathbf{B}} -\\, \\frac1c\\, ' +
    '\\frac{\\partial\\vec{\\mathbf{E}}}{\\partial t} &' +
    ' = \\frac{4\\pi}{c}\\vec{\\mathbf{j}} \\\\' +
    '  \\nabla \\cdot \\vec{\\mathbf{E}} & = 4 \\pi \\rho \\\\' +
    '  \\nabla \\times \\vec{\\mathbf{E}}\\, +\\, \\frac1c\\, ' +
    '\\frac{\\partial\\vec{\\mathbf{B}}}{\\partial t} &' +
    ' = \\vec{\\mathbf{0}} \\\\' +
    '  \\nabla \\cdot \\vec{\\mathbf{B}} & = 0' +
    ' \\end{align}',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
	{'type':'mtable',
         'children':[
	   {'type':'mtr',
            'children':[
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'∇',
                     'attributes':{'mathvariant':'normal'}},
	            {'type':'mo',
                     'text':'×',
                     'attributes':{}},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mrow',
                              'children':[
	                        {'type':'mrow',
                                 'inferred':true,
                                 'children':[
	                           {'type':'mi',
                                    'text':'B',
                                    'attributes':{'mathvariant':'bold'}}],
                                 'attributes':{}}],
                              'attributes':{},
                              'TeXAtom':'ORD'},
	                     {'type':'mo',
                              'text':'→',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'},
	            {'type':'mo',
                     'text':'−',
                     'attributes':{}},
	            {'type':'mspace',
                     'text':'',
                     'attributes':{'width':'thinmathspace'}},
	            {'type':'mfrac',
                     'children':[
	               {'type':'mn',
                        'text':'1',
                        'attributes':{}},
	               {'type':'mi',
                        'text':'c',
                        'attributes':{}}],
                     'attributes':{}},
	            {'type':'mspace',
                     'text':'',
                     'attributes':{'width':'thinmathspace'}},
	            {'type':'mfrac',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mi',
                           'text':'∂',
                           'attributes':{'mathvariant':'normal'}},
	                  {'type':'mrow',
                           'children':[
	                     {'type':'mrow',
                              'inferred':true,
                              'children':[
	                        {'type':'mover',
                                 'children':[
	                           {'type':'mrow',
                                    'children':[
	                              {'type':'mrow',
                                       'inferred':true,
                                       'children':[
	                                 {'type':'mi',
                                          'text':'E',
                                          'attributes':{'mathvariant':'bold'}}],
                                       'attributes':{}}],
                                    'attributes':{},
                                    'TeXAtom':'ORD'},
	                           {'type':'mo',
                                    'text':'→',
                                    'attributes':{'stretchy':false}}],
                                 'attributes':{}}],
                              'attributes':{}}],
                           'attributes':{},
                           'TeXAtom':'ORD'}],
                        'attributes':{}},
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mi',
                           'text':'∂',
                           'attributes':{'mathvariant':'normal'}},
	                  {'type':'mi',
                           'text':'t',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'=',
                     'attributes':{}},
	            {'type':'mfrac',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mn',
                           'text':'4',
                           'attributes':{}},
	                  {'type':'mi',
                           'text':'π',
                           'attributes':{}}],
                        'attributes':{}},
	               {'type':'mi',
                        'text':'c',
                        'attributes':{}}],
                     'attributes':{}},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mrow',
                              'children':[
	                        {'type':'mrow',
                                 'inferred':true,
                                 'children':[
	                           {'type':'mi',
                                    'text':'j',
                                    'attributes':{'mathvariant':'bold'}}],
                                 'attributes':{}}],
                              'attributes':{},
                              'TeXAtom':'ORD'},
	                     {'type':'mo',
                              'text':'→',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}},
	   {'type':'mtr',
            'children':[
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'∇',
                     'attributes':{'mathvariant':'normal'}},
	            {'type':'mo',
                     'text':'⋅',
                     'attributes':{}},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mrow',
                              'children':[
	                        {'type':'mrow',
                                 'inferred':true,
                                 'children':[
	                           {'type':'mi',
                                    'text':'E',
                                    'attributes':{'mathvariant':'bold'}}],
                                 'attributes':{}}],
                              'attributes':{},
                              'TeXAtom':'ORD'},
	                     {'type':'mo',
                              'text':'→',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'=',
                     'attributes':{}},
	            {'type':'mn',
                     'text':'4',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'π',
                     'attributes':{}},
	            {'type':'mi',
                     'text':'ρ',
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}},
	   {'type':'mtr',
            'children':[
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'∇',
                     'attributes':{'mathvariant':'normal'}},
	            {'type':'mo',
                     'text':'×',
                     'attributes':{}},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mrow',
                              'children':[
	                        {'type':'mrow',
                                 'inferred':true,
                                 'children':[
	                           {'type':'mi',
                                    'text':'E',
                                    'attributes':{'mathvariant':'bold'}}],
                                 'attributes':{}}],
                              'attributes':{},
                              'TeXAtom':'ORD'},
	                     {'type':'mo',
                              'text':'→',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'},
	            {'type':'mspace',
                     'text':'',
                     'attributes':{'width':'thinmathspace'}},
	            {'type':'mo',
                     'text':'+',
                     'attributes':{}},
	            {'type':'mspace',
                     'text':'',
                     'attributes':{'width':'thinmathspace'}},
	            {'type':'mfrac',
                     'children':[
	               {'type':'mn',
                        'text':'1',
                        'attributes':{}},
	               {'type':'mi',
                        'text':'c',
                        'attributes':{}}],
                     'attributes':{}},
	            {'type':'mspace',
                     'text':'',
                     'attributes':{'width':'thinmathspace'}},
	            {'type':'mfrac',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mi',
                           'text':'∂',
                           'attributes':{'mathvariant':'normal'}},
	                  {'type':'mrow',
                           'children':[
	                     {'type':'mrow',
                              'inferred':true,
                              'children':[
	                        {'type':'mover',
                                 'children':[
	                           {'type':'mrow',
                                    'children':[
	                              {'type':'mrow',
                                       'inferred':true,
                                       'children':[
	                                 {'type':'mi',
                                          'text':'B',
                                          'attributes':{'mathvariant':'bold'}}],
                                       'attributes':{}}],
                                    'attributes':{},
                                    'TeXAtom':'ORD'},
	                           {'type':'mo',
                                    'text':'→',
                                    'attributes':{'stretchy':false}}],
                                 'attributes':{}}],
                              'attributes':{}}],
                           'attributes':{},
                           'TeXAtom':'ORD'}],
                        'attributes':{}},
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mi',
                           'text':'∂',
                           'attributes':{'mathvariant':'normal'}},
	                  {'type':'mi',
                           'text':'t',
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'=',
                     'attributes':{}},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mrow',
                              'children':[
	                        {'type':'mrow',
                                 'inferred':true,
                                 'children':[
	                           {'type':'mn',
                                    'text':'0',
                                    'attributes':{'mathvariant':'bold'}}],
                                 'attributes':{}}],
                              'attributes':{},
                              'TeXAtom':'ORD'},
	                     {'type':'mo',
                              'text':'→',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}},
	   {'type':'mtr',
            'children':[
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'∇',
                     'attributes':{'mathvariant':'normal'}},
	            {'type':'mo',
                     'text':'⋅',
                     'attributes':{}},
	            {'type':'mrow',
                     'children':[
	               {'type':'mrow',
                        'inferred':true,
                        'children':[
	                  {'type':'mover',
                           'children':[
	                     {'type':'mrow',
                              'children':[
	                        {'type':'mrow',
                                 'inferred':true,
                                 'children':[
	                           {'type':'mi',
                                    'text':'B',
                                    'attributes':{'mathvariant':'bold'}}],
                                 'attributes':{}}],
                              'attributes':{},
                              'TeXAtom':'ORD'},
	                     {'type':'mo',
                              'text':'→',
                              'attributes':{'stretchy':false}}],
                           'attributes':{}}],
                        'attributes':{}}],
                     'attributes':{},
                     'TeXAtom':'ORD'}],
                  'attributes':{}}],
               'attributes':{}},
	      {'type':'mtd',
               'children':[
	         {'type':'mrow',
                  'inferred':true,
                  'children':[
	            {'type':'mi',
                     'text':'',
                     'attributes':{}},
	            {'type':'mo',
                     'text':'=',
                     'attributes':{}},
	            {'type':'mn',
                     'text':'0',
                     'attributes':{}}],
                  'attributes':{}}],
               'attributes':{}}],
            'attributes':{}}],
         'attributes':{
           'columnalign':'right left right left right left right left right' +
             ' left right left',
           'rowspacing':'3pt',
           'columnspacing':'0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em',
                       'displaystyle':true}}],
      'attributes':{}}],
   'attributes':{'display':'block'}});


jsonTest.ignoreTest(
  'Color Frac', '\\frac{{\\cal \\color{red}{X}}}{\\color{blue}{\\sf y}}',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
	{'type':'mfrac',
	 'children':[
	   {'type':'mrow',
	    'children':[
	      {'type':'mrow',
	       'inferred':true,
	       'children':[
	         {'type':'mstyle',
	          'children':[
	            {'type':'mrow',
	             'inferred':true,
	             'children':[
	               {'type':'mi',
	                'text':'X',
	                'attributes':{'mathvariant':'-tex-caligraphic'}}],
	             'attributes':{}}],
	          'attributes':{'mathcolor':'red'}}],
	       'attributes':{}}],
	    'attributes':{},
	    'TeXAtom':'ORD'},
	   {'type':'mstyle',
	    'children':[
	      {'type':'mrow',
	       'inferred':true,
	       'children':[
	         {'type':'mi',
	          'text':'y',
	          'attributes':{'mathvariant':'sans-serif'}}],
	       'attributes':{}}],
	    'attributes':{'mathcolor':'blue'}}],
	 'attributes':{}}],
      'attributes':{}}],
   'attributes':{'display':'block'}}
);


jsonTest.amsTest(
  'Cubic Binomial',
	 '{\\begin{eqnarray}(x+y)^{3}&=&(x+y)(x+y)(x+y)\\\\&' +
    '=&xxx+xxy+xyx+{\\underline {xyy}}+yxx+{\\underline {yxy}}' +
    '+{\\underline {yyx}}+yyy\\\\&=&x^{3}+3x^{2}y+' +
    '{\\underline {3xy^{2}}}+y^{3}.\\end{eqnarray}}',
  {'type':'math',
   'children':[
     {'type':'mrow',
      'inferred':true,
      'children':[
	{'type':'mrow',
	 'children':[
	   {'type':'mrow',
	    'inferred':true,
	    'children':[
	      {'type':'mtable',
	       'children':[
	         {'type':'mtr',
	          'children':[
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[
	                  {'type':'mo',
	                   'text':'(',
	                   'attributes':{'stretchy':false}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'msup',
	                   'children':[
	                     {'type':'mo',
	                      'text':')',
	                      'attributes':{'stretchy':false}},
	                     {'type':'mrow',
	                      'children':[
	                        {'type':'mrow',
	                         'inferred':true,
	                         'children':[
	                           {'type':'mn',
	                            'text':'3',
	                            'attributes':{}}],
	                         'attributes':{}}],
	                      'attributes':{},
	                      'TeXAtom':'ORD'}],
	                   'attributes':{}}],
	                'attributes':{}}],
	             'attributes':{}},
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[
	                  {'type':'mi',
	                   'text':'',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'=',
	                   'attributes':{}}],
	                'attributes':{}}],
	             'attributes':{}},
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[
	                  {'type':'mi',
	                   'text':'',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'(',
	                   'attributes':{'stretchy':false}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':')',
	                   'attributes':{'stretchy':false}},
	                  {'type':'mo',
	                   'text':'(',
	                   'attributes':{'stretchy':false}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':')',
	                   'attributes':{'stretchy':false}},
	                  {'type':'mo',
	                   'text':'(',
	                   'attributes':{'stretchy':false}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':')',
	                   'attributes':{'stretchy':false}}],
	                'attributes':{}}],
	             'attributes':{}}],
	          'attributes':{}},
	         {'type':'mtr',
	          'children':[
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[],
	                'attributes':{}}],
	             'attributes':{}},
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[
	                  {'type':'mi',
	                   'text':'',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'=',
	                   'attributes':{}}],
	                'attributes':{}}],
	             'attributes':{}},
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mrow',
	                   'children':[
	                     {'type':'mrow',
	                      'inferred':true,
	                      'children':[
	                        {'type':'munder',
	                         'children':[
	                           {'type':'mrow',
	                            'inferred':true,
	                            'children':[
	                              {'type':'mi',
	                               'text':'x',
	                               'attributes':{}},
	                              {'type':'mi',
	                               'text':'y',
	                               'attributes':{}},
	                              {'type':'mi',
	                               'text':'y',
	                               'attributes':{}}],
	                            'attributes':{}},
	                           {'type':'mo',
	                            'text':'_',
	                            'attributes':{}}],
	                         'attributes':{}}],
	                      'attributes':{}}],
	                   'attributes':{},
	                   'TeXAtom':'ORD'},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'x',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mrow',
	                   'children':[
	                     {'type':'mrow',
	                      'inferred':true,
	                      'children':[
	                        {'type':'munder',
	                         'children':[
	                           {'type':'mrow',
	                            'inferred':true,
	                            'children':[
	                              {'type':'mi',
	                               'text':'y',
	                               'attributes':{}},
	                              {'type':'mi',
	                               'text':'x',
	                               'attributes':{}},
	                              {'type':'mi',
	                               'text':'y',
	                               'attributes':{}}],
	                            'attributes':{}},
	                           {'type':'mo',
	                            'text':'_',
	                            'attributes':{}}],
	                         'attributes':{}}],
	                      'attributes':{}}],
	                   'attributes':{},
	                   'TeXAtom':'ORD'},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mrow',
	                   'children':[
	                     {'type':'mrow',
	                      'inferred':true,
	                      'children':[
	                        {'type':'munder',
	                         'children':[
	                           {'type':'mrow',
	                            'inferred':true,
	                            'children':[
	                              {'type':'mi',
	                               'text':'y',
	                               'attributes':{}},
	                              {'type':'mi',
	                               'text':'y',
	                               'attributes':{}},
	                              {'type':'mi',
	                               'text':'x',
	                               'attributes':{}}],
	                            'attributes':{}},
	                           {'type':'mo',
	                            'text':'_',
	                            'attributes':{}}],
	                         'attributes':{}}],
	                      'attributes':{}}],
	                   'attributes':{},
	                   'TeXAtom':'ORD'},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}}],
	                'attributes':{}}],
	             'attributes':{}}],
	          'attributes':{}},
	         {'type':'mtr',
	          'children':[
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[],
	                'attributes':{}}],
	             'attributes':{}},
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[
	                  {'type':'mi',
	                   'text':'',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'=',
	                   'attributes':{}}],
	                'attributes':{}}],
	             'attributes':{}},
	            {'type':'mtd',
	             'children':[
	               {'type':'mrow',
	                'inferred':true,
	                'children':[
	                  {'type':'msup',
	                   'children':[
	                     {'type':'mi',
	                      'text':'x',
	                      'attributes':{}},
	                     {'type':'mrow',
	                      'children':[
	                        {'type':'mrow',
	                         'inferred':true,
	                         'children':[
	                           {'type':'mn',
	                            'text':'3',
	                            'attributes':{}}],
	                         'attributes':{}}],
	                      'attributes':{},
	                      'TeXAtom':'ORD'}],
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mn',
	                   'text':'3',
	                   'attributes':{}},
	                  {'type':'msup',
	                   'children':[
	                     {'type':'mi',
	                      'text':'x',
	                      'attributes':{}},
	                     {'type':'mrow',
	                      'children':[
	                        {'type':'mrow',
	                         'inferred':true,
	                         'children':[
	                           {'type':'mn',
	                            'text':'2',
	                            'attributes':{}}],
	                         'attributes':{}}],
	                      'attributes':{},
	                      'TeXAtom':'ORD'}],
	                   'attributes':{}},
	                  {'type':'mi',
	                   'text':'y',
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'mrow',
	                   'children':[
	                     {'type':'mrow',
	                      'inferred':true,
	                      'children':[
	                        {'type':'munder',
	                         'children':[
	                           {'type':'mrow',
	                            'inferred':true,
	                            'children':[
	                              {'type':'mn',
	                               'text':'3',
	                               'attributes':{}},
	                              {'type':'mi',
	                               'text':'x',
	                               'attributes':{}},
	                              {'type':'msup',
	                               'children':[
	                                 {'type':'mi',
	                                  'text':'y',
	                                  'attributes':{}},
	                                 {'type':'mrow',
	                                  'children':[
	                                    {'type':'mrow',
	                                     'inferred':true,
	                                     'children':[
	                                       {'type':'mn',
	                                        'text':'2',
	                                        'attributes':{}}],
	                                     'attributes':{}}],
	                                  'attributes':{},
	                                  'TeXAtom':'ORD'}],
	                               'attributes':{}}],
	                            'attributes':{}},
	                           {'type':'mo',
	                            'text':'_',
	                            'attributes':{}}],
	                         'attributes':{}}],
	                      'attributes':{}}],
	                   'attributes':{},
	                   'TeXAtom':'ORD'},
	                  {'type':'mo',
	                   'text':'+',
	                   'attributes':{}},
	                  {'type':'msup',
	                   'children':[
	                     {'type':'mi',
	                      'text':'y',
	                      'attributes':{}},
	                     {'type':'mrow',
	                      'children':[
	                        {'type':'mrow',
	                         'inferred':true,
	                         'children':[
	                           {'type':'mn',
	                            'text':'3',
	                            'attributes':{}}],
	                         'attributes':{}}],
	                      'attributes':{},
	                      'TeXAtom':'ORD'}],
	                   'attributes':{}},
	                  {'type':'mo',
	                   'text':'.',
	                   'attributes':{}}],
	                'attributes':{}}],
	             'attributes':{}}],
	          'attributes':{}}],
	       'attributes':{'columnalign':'right center left',
	                     'rowspacing':'3pt',
	                     'columnspacing':'0 thickmathspace',
	                     'displaystyle':true}}],
	    'attributes':{}}],
	 'attributes':{},
	 'TeXAtom':'ORD'}],
      'attributes':{}}],
   'attributes':{'display':'block'}}
);

// Currently ignored tests use AMS math stuff.

jsonTest.printTime();
